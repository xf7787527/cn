# 常见问题

### 综合类

**Q：如何部署应用到网格？**

A：如果是新 K8S 集群，在一键安装istio组件时打开自动注入代理开关，后续安装业务应用就会自动注入代理。如果 K8S 集群中已有应用，则可以使用手工注入代理功能。部署之后要配置istio网关进行引流。

**Q：网格部署失败了怎么办？**

A：可以尝试再部署两次，如果始终不成功，可以将错误信息提交工单，说明操作过程，错误信息，集群名称等信息。

**Q：原来的集群已经有应用了，怎么注入代理？**

A：可以使用手工注入代理功能。

**Q：目前网格支持哪些服务治理功能？**     

A：服务注册发现、负载均衡、熔断、分流、限流、安全、调用链、遥测数据查看等。

**Q：如何将应用迁出网格？迁移过程中会不会断流？**

A：迁出时可以使用反注入代理功能，实例在去除代理时使用 K8S  rollout机制，有可能造成原有连接或长连接中断。另外还要考虑去除网格网关，需要制定详细的迁入迁出方案才能实现不断流，可以找京东云网格团队支持。

**Q：是否支持多集群？**

A：目前尚不支持。

**Q：如何使用网格的分流功能？**

A：网格支持入口分流规则、内部分流规则。入口分流可以根据域名从网关分流到入口服务，内部分流规则主要用于网格内服务互相访问时使用，支持Header、URI、权重三种方式分流。

**Q：如何规划网格的网关？**

A：网关是整个系统的出口，通常情况下一个网关即可满足业务需求，后端多个服务绑定到同一个网关，网关只需要设置域名为“*”即可。特殊业务场景下，也可以设置多网关，每个网关支持多端口。

**Q：网格组件支持哪些？网格组件没有外网IP怎么办？**

A：组件包括kiali，grafana、jaeger、bookinfo示例、prometheus。云网格使用ingress开放了部分前四种组件，并自动生成了网关及配置，在安装后可以在组件管理页面看到访问地址。

**Q：网格gateway和k8s gateway分别指什么？**

A：网格的网关和  K8S 的ingress不是一回事，目前云网格使用istio gateway引流，未使用  K8S  ingress。

**Q：如何使用网格的故障注入？**

A：目前不支持故障注入，后续会支持此功能。

**Q：网格版本是多少？能升级吗？**

A：目前istio版本是1.12.1，后续会支持升级功能。

**Q：安装后功能不生效**

A：请先确认k8s的版本是1.18及以上，其次检查istio-system命名空间下的istio组件是否是running状态。如果有pending状态，通常是因为资源不足，k8s未正常调度istio组件。请申请一定的资源后重试。
