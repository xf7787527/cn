
# 安全加速 DNS

**安全加速 DNS简述**


DNS为域名解析系统，安全加速提供半接入与全接入方式。均需要DNS配合进行相应的配置。

**半接入 添加A记录**


当您采用半接入（Cname）方式接入安全加速完成后，需要在DNS配置源站的主机解析记录。
如图所示，我们将相应主机记录的A记录配置好，这样安全加速节点就可以顺利回源到源站，前提条件已经添加好域名。


![添加A记录](https://github.com/jdcloudcom/cn/blob/cn-starshield/image/Starshield/ADD-A-Accord.png)

步骤参考：
1. 登录京东云控制台，选择安全加速产品。
2. 进入域名管理，选择正确的域名。
3. 选择DNS配置，进入DNS配置页面，点击添加解析。
4. 选择正确的解析记录，填写正确的记录值。

**解析记录值说明**

- A 记录，是将访问者的浏览器请求重定向到源服务器。
- Cname，是将访问者的浏览器请求重定向到源服务器。与A记录不同，Cname将指向 example.com 等主机名，而不是IP地址，然后，example.com 将具有列出 IP 地址的 A 记录或使用指向不同主机名的另一个 CNAME 记录。最终，CNAME 记录链必须指向解析为 IP 地址的主机名。
- AAAA 记录，是将访问者的浏览器请求重定向到源服务器，需使用IPv6地址。

**DNS代理功能 隐藏源站IP**

安全加速提供用户可选的代理以及非代理功能，当您的DNS记录，显示为代理模式时，安全加速会加速保护您的网站。
当非代理状态时，您的DNS记录可能会泄露您的源站IP地址，容易遭受攻击，存在安全隐患。
- 建议开启代理功能的情况

  该情况下需要隐藏源站IP地址，请单击编辑解析，点击代理到安全加速。为了使用安全加速的缓存和安全功能，我们建议您将 HTTP 流量的 DNS 记录（包括 A、AAAA 和 CNAME）设为代理模式。但是，请不要将用于解析 MX 记录的 A、AAAA 或 CNAME 记录设为代理。  例如，如果您有一个 MX 记录指向作为邮件服务器的 mail.example.com，则将 mail.example.com 的 A 记录设为代理会中断您的邮件流量。

- 建议关闭DNS代理的情况

  有些情况下，您的部分 DNS 记录需要保持非代理状态。例如：用于邮件流量的的 A、AAAA 或 CNAME 记录不得设为代理状态，因为电子邮件路由无法通过安全加速的代理。当您在同服务器上托管多个服务（例如，网站和电子邮件）时,为降低此风险，我们建议您在与您站点的源站不同的服务器（内部或外部）中托管您的电子邮件服务。
  
**支持的解析记录类型**
  
   【半接入CNAME】支持的解析记录类型如下：
     
       A 将域名指向一个IPV4地址
       AAAA 将域名指向一个IPV6地址
       CNAME 将域名指向另外一个域名
   
   【全接入】支持的解析记录类型如下：
      
      A 将域名指向一个IPV4地址
      AAAA 将域名指向一个IPV6地址
      CNAME 将域名指向另外一个域名
      NS 将子域名指定其他DNS服务器解析
      MX 将域名指向邮件服务器地址
      SRV 记录提供特定服务的服务器
      TXT 文本长度限制255，通常做SPF记录（反垃圾邮件）
      CAA CA证书颁发机构授权校验
