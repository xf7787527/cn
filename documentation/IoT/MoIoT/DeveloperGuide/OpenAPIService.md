# OpenAPI服务

## OpenAPI支持列表
###	消息推送API：
- 消息推送：向单台或多个设备推送JSON格式的消息内容；
- 消息发送状态查询：已送达、未送达、执行成功、执行失败、消息已过期未发送；

### 设备管理API
- 设备列表查询：查询符合条件的所有设备列表；
- 设备详细信息查询：包括设备在线状态、设备名称、设备型号、最后在线时间、设备激活时间、绑定企业及门店信息、设备截屏列表信息、主板型号、屏幕密度、屏幕DPI、屏幕分辨率、屏幕方向、内存总量、已使用内存容量、存储总量、已使用存储容量、CPU使用率信息（总量/已使用）、设备流量使用情况、网络连接状态、WIFI信号强度、移动网络信号强度、设备地理位置信息；
- 设备批量绑定：批量为设备绑定企业及门店；

### 设备远程配置API
- JSON格式自定义配置设备；
- 修改设备常用配置：媒体音量、定时开关机、蓝牙、屏幕亮度、安装未知来源应用开关、预装应用、开机自启应用、霸屏应用等

### 应用管理API
- 获取平台上传应用列表；
- 查询应用详情：应用名称、应用ID、应用描述、市场来源、应用图标、包名、安装设备量统计、应用版本（版本号、版本名称、下载地址）、更新时间等；
- 应用安装：向单台或多台设备推送应用安装指令；
- 应用卸载：向单台或多台设备推送应用卸载指令；
- 查询设备已安装应用列表；
- 查询设备安装的应用版本信息；
- 应用升级：向单台或多台设备推送应用升级指令；
- 应用霸屏或取消应用霸屏；

### 设备远程控制API
- 设备快照
- 设备重启
- 设备截屏
- 注销设备
- 应用重启
- 停用应用
- 切换前台运行应用
- 拉取设备日志
- 远程ADB调试（以内嵌H5形式向外提供服务）
- 远程协助（以内嵌H5形式向外提供服务）

### 统计API
- 设备统计：统计一段时间内设备的活跃总数/激活总数/绑定总数等；
- 统计消息送达统计：消息ID、推送目标数、送达数；
- 应用统计：统计应用安装数、应用各版本安装数及占比
- 流量消耗统计：统计设备流量消耗情况、应用消耗流量情况；
- 设备健康统计：设备故障上报、频繁上下线、频繁开关机、内存告警、存储告警、CPU告警统计；
- 设备机型统计：各型号设备激活统计及排名、各型号设备分布城市统计及排名；
- 设备区域分布统计：各省市激活设备分布统计；

## OpenAPI接入及鉴权机制
- 通讯协议：所有接口均通过 HTTPS 进行通信，提供高安全性的通信通道；
- 字符编码：均使用UTF-8编码；
- 鉴权方式：商业物联管理系统采用HTTP基本认证(Basic Authentication)的验证方式。

      基本作法为，在HTTP Header（头）里加鉴权信息：
      Authorization: Basic base64_auth_string
      其中 base64_auth_string 的生成算法为：base64(appId:appKey),其中涉及到的参数如下:

| 名称 | 说明 |
|-----|:--------------------------|
| appId | 应用ID,由平台分配 |
| appKey | 应用秘钥, 由平台分配 |
- 示例:
      
      若appId为APP000001, appKey为PXN0eBuyFKF9tRbM,则HTTP头为
      POST /api/demo HTTP/1.1
      Host: xxx.xxx.xxx
      Authorization: Basic QVBQMDAwMDAxOlBYTjBlQnV5RktGOXRSYk0=

