# 闲聊

## 一、接口描述

### 1. 功能描述

对非业务场景的消息进行响应，满足用户日常沟通及问答需求。

### 2. 接口数据要求：

> 文本: 有明确语义的通顺句子，非业务场景请求。

### 3. 接口使用：

进入京东智联云控制台-账号管理-Access Key管理，创建并获取Access Key。整体流程详见 [调用方法](https://docs.jdcloud.com/cn/common-declaration/api/call-methods) 。

## 二、请求说明

### 1. 接口地址 ：

```
 https://aiapi.jdcloud.com/jdai/textDetect
```

### 2. 请求方式：

```
get
```

### 3. 请求参数

#### query请求参数

公共请求参数

| 名称      | 类型   | 必填 | 示例值                           | 描述                                           |
| --------- | ------ | ---- | -------------------------------- | ---------------------------------------------- |
| appkey    | String | 是   | 80d2b762ecb86593f9668526920f46c  | 您的appkey，可在买家中心控制台中获取           |
| timestamp | long   | 是   | 1541491668060                    | 请求的时间戳，精确到毫秒，timestamp有效期5分钟 |
| sign      | String | 是   | 2e148773a0337a8f2200ba90d445f083 | 签名，根据规则MD5(sectetkey+timestamp)         |

业务请求参数

| 名称    | 类型   | 必填 | 示例值 | 描述         |
| ------- | ------ | ---- | ------ | ------------ |
| context | string | 是   | 你好   | 输入文本内容 |

### 4、请求代码示例

建议您使用我们提供的SDK进行调用，SDK获取及调用方式详见本页一接口描述中的4接口使用

## 三、返回说明

### 1、返回参数

#### （1）公共返回参数

| 名称          | 类型    | 示例值        | 描述                                                         |
| ------------- | ------- | ------------- | ------------------------------------------------------------ |
| code          | string  | 1000          | 参见下方错误码-系统级错误码                                  |
| charge        | boolean | false 或 true | false：不扣费， true：扣费                                   |
| remainTimes   | long    | 1305          | 剩余调用次数；免费api：每天剩余调用次数；收费api：剩余次数；无限制时为-1 |
| remainSeconds | long    | 1223456       | 剩余调用时间（s）；免费api：-1；收费api：剩余调用时间；无限制时为-1 |
| msg           | string  | 查询成功      | 参见下方错误码-系统级错误码                                  |
| result        | object  | {...}         | 查询结果                                                     |

#### （2）业务返回参数

result参数信息

| 名称        | 类型   | 示例值     | 描述           |
| ----------- | ------ | ---------- | -------------- |
| best_answer | string | 又见面啦！ | 对话的返回结果 |

```
{
  "code": "10000",
  "charge": false,
  "remainTimes": 4998,
  "remainSeconds": -1,
  "msg": "查询成功",
  "result": {

    "best_answer": "又见面啦！"
  }
}
```

## 四、错误码

### 1.系统级错误码

[详见返回码](https://aidoc.jd.com/user/returncode.html)

### 2.业务错误码

| 业务错误码（code） | message                  | 说明                                                         |
| ------------------ | ------------------------ | ------------------------------------------------------------ |
| 12001              | "input context is empty" | 用户输入参数为空                                             |
| 12002              | "es results is empty"    | 初步筛选的候选结果集合为空，即用户输入的话术没有对应的闲聊回复匹配 |
| 12003              | "smn result is empty"    | 最终确定的最优结果为空，即最终结果输出有问题                 |